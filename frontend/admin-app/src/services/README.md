# Документация API

## Общие требования
- В случае возникновения обрабатываемой ошибки возвращать:
```
{
    error: string // сообщение, которое выведется пользователю на фронте
}
```

- Во всех случаях, кроме авторизации будет пробразываться токен. ```Authorization : Bearer <token>```


## Контроллер: Templates
### Структура
```typescript
{
    templateId: string, // Идентификатор
    productType: string, // Тип продукта. Например, "Тушёнка", "Труба". Максимум 50 символов
    productName: string, // Название продука. Максимум 100 символов
    description: string, // Описание. максимум 1024 символа 
    imageUrl: string, // ссылка на изображение
    links: [ // Массив ссылок на ресурсы. если ссылок нет, то должно быть равно пустому массиву "[]"
        {
            linkName: string, // Название сайта Максимум 50 символов
            url: string // Ссылка на сайт. Максимум 1024 символа
        },
        {
            linkName: string,
            url: string
        }
    ];
    specifications: [ // Массив свойст продукта. Если свойст нет, то должен быть просто пустой массив "[]"
        {
            parameterName: string, // название поля
            value: string | number, // значение параметра
            unit?: string // Опциональное поле единиц измерения. Например, кг, см ...
        }
    ],
    isArchived: boolean, // Архивирован ли шаблон. Если шаблон архивирован, то он не доступен для записи. Это аналог удаления, т.к. уже опубликованный (он записан на block-chai) шаблон нельзя удалить
    isPublished: boolean, // Опубликован ли шаблон. Если шаблон не опубликован, то он не записан в block-chain и его ещё можно редактировать
    isVisible: boolean // Если значение "false", шаблон не будет доступен для записи через мобильное приложение. 
}
```

- ### ```GET``` /templates
Возвращает все шаблоны пользователя
```typescript
[<шаблоны>]
```
- ### ```GET``` /templates?filter=scanner 
Возвращает шаблоны, которые доступны для записи. Это значит, что у данных шаблонов ``` isArchives = false```, ```isPublished = true```, ```isVisible = true```. Структура возвращаемого значения аналогична тому. что написано выше.

- ### POST /templates
При обращении к этому эндпоинту будет создаваться новый шаблон
В ```body``` запроса будет приходить следующая структура (описана выше, но здесь только один элемент):
```typescript
{
    templateId: null, // така id ещё не определён всегда будет приходить "null" 
    Далее всё то же самое, что описано в структуре выше ...
}
```
В ответ на запрос должно возвращаться следующее:
```
{
    templateId: string // созданный БД идентификатор, чтобы задать его и на фронте
}
```

- ### ```PUT``` /templates
Эндпоинт для изменения шаблона. В ```body``` запроса будет приходить структура шаблона, описанная выше
ВАЖНО! У неопубликованного шаблона значение ```isVisible``` и ```isArchived``` не могут быть ```true```

- ### ```DELETE``` /templates?templateId=<templateId>
При обращении к данному эндпоинту будет происходить удаление соответствующего шаблона. ВАЖНО! Удалить возможно только неопубликованный шаблоон ```isPublished = false```


## Контроллер: Product
### Структура
```typescript
{
    productId: string,
    productType: string, // Тип продукта. Например, "Тушёнка", "Труба". Максимум 50 символов
    productName: string, // Название продука. Максимум 100 символов
    description: string, // Описание. максимум 1024 символа 
    imageUrl: string,
    links: [
        {
            linkName: string, // Название сайта Максимум 50 символов
            url: string // Ссылка на сайт. Максимум 1024 символа
        }
    ],
    specifications: [
        {
            parameterName: string, // название поля
            value: string | number, // значение параметра
            unit?: string // Опциональное поле единиц измерения. Например, кг, см ...
        }
    ],
    createdate: string, // дата создания продукта 
    longitude: string, // долгота
    latitude: string, // широта
    producerName: string // название компании - производителя
}
```
- ### ```GET``` /products
Возвращает все продукты пользователя

```typescript
[<продукт>]
```

- ### ```GET``` /products?productId=<productId>
Возвращает определённый продукт

- ### ```POST``` /products
Создаёт новый продукт. В ```body``` запроса будет приходить следующая структура (описана выше, но здесь только один элемент):
```typescript
{
    productId: null, // така id ещё не определён всегда будет приходить "null" 
    Далее всё то же самое, что описано в структуре выше ...
}
```
В ответ на запрос должно возвращаться следующее:
```
{
    productId: string // созданный БД идентификатор, чтобы задать его и на фронте
}
```

## Контроллер: User

- ### ```POST``` /signup
Регистрация пользователя
В ```body``` приходит:
```
{
    email: string,
    name: string,
    surname: string,
    password: string // пароль
}
```
Возвращает
```
{
    accessToken: string, // Токен авторизации. Если авторизации нет, можно ввозвращать пустую строку
    email: string,
    name: string,
    surname: string
}
```



- ### ```POST``` /login
Авторизует пользователя
В ```body``` приходит:
```
{
    email: string, // почта пользователя
    password: string // пароль
}
```
Возвращает
```
{
    accessToken: string, // Токен авторизации. Если авторизации нет, можно ввозвращать пустую строку
    email: string,
    name: string,
    surname: string
}
```


- ### ```GET``` /user
Возвращает данне пользователя. Вызывать данный эндпоинт можно только после авторизации.
Возвращает следующее: 
```
{
    email: string,
    name: string,
    surname: string
}
```